<%- include('snippets/head') %>
    
      <!-- Navbar -->
      <nav class="main-header navbar navbar-expand navbar-white navbar-light">
        <!-- Left navbar links -->
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
          </li>
         
        </ul>
    
        <!-- Right navbar links -->
        <ul class="navbar-nav ml-auto">
    
          <li class="nav-item">
            <a class="nav-link" data-widget="fullscreen" href="#" role="button">
              <i class="fas fa-expand-arrows-alt"></i>
            </a>
          </li>
       </ul>
      </nav>
      <!-- /.navbar -->
    
      <!-- Main Sidebar Container -->
      <aside class="main-sidebar sidebar-dark-primary elevation-4">
        <!-- Brand Logo -->
        <a href="/admin" class="brand-link">
          <img src="/dasboars/AdminLTE-3.2.0/dist/img/icons8-password-64.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
          <span class="brand-text font-weight-light">Single Sign On</span>
        </a>
    
        <!-- Sidebar -->
        <div class="sidebar">
          <!-- Sidebar user panel (optional) -->
       
    
          <!-- SidebarSearch Form -->
          <div class="form-inline">
            <div class="input-group" data-widget="sidebar-search">
              <input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
              <div class="input-group-append">
                <button class="btn btn-sidebar">
                  <i class="fas fa-search fa-fw"></i>
                </button>
              </div>
            </div>
          </div>
    
          <!-- Sidebar Menu -->
          <nav class="mt-2">
            <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
              <!-- Add icons to the links using the .nav-icon class
                   with font-awesome or any other icon font library -->
              <li class="nav-item menu-open">
                <a href="#" class="nav-link active">
                  <i class="nav-icon fas fa-tachometer-alt"></i>
                  <p>
                    Data
                    <i class="right fas fa-angle-left"></i>
                  </p>
                </a>
                <ul class="nav nav-treeview">
                    <li class="nav-item">
                      <a href="/user" class="nav-link">
                        <i class="far fa-circle nav-icon"></i>
                        <p>Data User</p>
                      </a>
                    </li>
                  </ul>
                  <ul class="nav nav-treeview">
                    <li class="nav-item">
                      <a href="/client" class="nav-link active">
                        <i class="far fa-circle nav-icon"></i>
                        <p>Data Client</p>
                      </a>
                    </li>
                  </ul> 
              </li>
                </ul>
              </li>
            </ul>
          </nav>
          <!-- /.sidebar-menu -->
        </div>
        <!-- /.sidebar -->
      </aside>
    
      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <div class="content-header">
          <div class="container-fluid">
            <div class="row mb-2">
              <div class="col-sm-6">
                <h1 class="m-0">Data Client</h1>
              </div><!-- /.col -->
              <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                  <li class="breadcrumb-item"><a href="/logout">Logout</a></li>
                </ol>
              </div><!-- /.col -->
            </div><!-- /.row -->
          </div><!-- /.container-fluid -->
        </div>
        <!-- /.content-header -->
    
        <!-- Main content -->
        <section class="content">
          <div class="container-fluid">
            <div class="row">
              <div class="col-12">
                <div class="card">
                  <div class="card-header">
                    <h2 class="card-title">
                    <button type="button" class="btn btn-block btn-success btn-xs" data-toggle="modal" data-target="#modal-success">Tambah data</button>
                  </h2>
                  </div>
                  <!-- /.card-header -->
                  <div class="card-body">
                    <% if (clients.length > 0) { %>
                    <table id="example1" class="table table-bordered table-striped" >
                      <thead>
                      <tr>
                        <th>Nama Client</th>
                        <th>Client ID</th>
                        <th>Client Secret</th>
                        <th>Redirect URI</th>
                        <th>Aksi</th>
                        <th>Logo</th>
                      </tr>
                      </thead>
                      <tbody>
                        <% clients.forEach(c => { %>
                            <tr>
                                <td><%= c.nama_client %></td>
                                <td><%= c.client_id %></td>
                                <td><%= c.client_secret %></td>
                                <td><%= c.redirect_uri %></td>
                                <td>
                                    <a class="btn btn-primary" href="/client/edit/<%= c.client_id %>">Edit</a>
                                    <button type="button" id="hapusUserid" class="btn btn-danger"  onclick="return fungsiUbahLink('<%= c.client_id %>', '<%= c.nama_client %>')" data-toggle="modal" data-target="#modal-danger">Hapus</button>
                                </td>
                                <td>
                                  <img src="/logo_client/<%= c.logo_app %>" alt="" height="100">
                                </td>
                            </tr>
                <div class="modal fade" id="modal-danger">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h4 class="modal-title">Hapus Data</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <p id="pesan"></p>
                        <a  class="btn btn-danger" id="hapusUser">DELETE</a>
                      </div>
                    </div>
                  </div>
                </div>

                          <script>
                            function fungsiUbahLink(idnya, namanya) {
                              const hapus = document.getElementById('hapusUser')
                              const nama = document.getElementById('pesan')
                              nama.innerText = `apakah ada yakin menghapus data client yang bernama  ${namanya}`
                              hapus.setAttribute('href', `/client/hapus/${idnya}`)
                            }

                            </script>

                        </td>
                      </tr>
                      </tr>
                      <% }) %>
                    </tbody>
                  </table>

            <% } else { %>
                <h3>tidak ada data yang bisa ditampilkan</h3>
            <% } %>
                  </div>
                  <!-- /.card-body -->
                </div>
                <!-- /.card -->
    
                <div class="modal fade" id="modal-default">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h4 class="modal-title">Edit Data</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <p>One fine body&hellip;</p>
                      </div>
                      <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                      </div>
                    </div>
                    <!-- /.modal-content -->
                  </div>
                  <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->

                
                
                <div class="modal fade" id="modal-success">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h4 class="modal-title">Tambah data</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      
                      <div class="text-center"><span class="h4 text-center" id="pesan"></span></div>
                      <div class="text-center"><span class="h4 text-center" id="email"></span></div>
                     

                      <div class="modal-body">
                        
                          <div class="card-body">
                            <div class="form-group">
                              <form action="" method="POST" enctype="multipart/form-data">
                                <label for="nama">Nama Clients</label>
                                  <input type="text" class="form-control" id="client_name" name="client_name" placeholder="masukan nama Client" required>
                                
                                  <label for="redirect_uri">Redirect URI Client</label>
                                  <input type="text" class="form-control" id="redirect_uri" name="redirect_uri"  pattern="https?://.+" title="Include http://" placeholder="redirect_uri" required>
                                  <label for="logo_aplikasi">Logo App</label>
                                  <input type="file" class="form-control" id="logo_aplikasi" name="logo_aplikasi" placeholder="Logo App" required>
                      </div>
                      <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <input type="submit" name="simpan" class="btn btn-primary" id="btnSubmit" value="Submit"    >
                      </form>
                      </div>
                    </div>
                    <!-- /.modal-content -->
                  </div>
                  <!-- /.modal-dialog -->
                </div>
    
                </div>
                </div>
    
    
    
    
                <!-- /.card -->
              </div>
              <!-- /.col -->
            </div>
            <!-- /.row -->
          </div>
          <!-- /.container-fluid -->
       
        <!-- /.content -->
     
    
      <!-- /.content-wrapper -->
    
    
      <!-- Control Sidebar -->
      <aside class="control-sidebar control-sidebar-dark">
        <!-- Control sidebar content goes here -->
      </aside>
      <!-- /.control-sidebar -->
    </div>
    <!-- ./wrapper -->
     </section> 
    </div>
<%- include('snippets/foot') %>

    </body>
